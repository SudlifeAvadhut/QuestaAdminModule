
<div class="container">
    <div class="row">
        <div class="col-md-12" >
            <div class="alert" [class.visible]="isVisible">{{message}}</div>
        </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-md-5">
        <div class="card">
            <div class="card-body">
                <div class="stat-widget-five">

                    <div class="stat-content">
                        <form [formGroup]="GenerationLinkForm">
                            <div class="form-row">
                                <div class="form-group col-md-12">
                                    <mat-form-field class="example-full-width" appearance="outline"
                                        [ngClass]="{ 'is-invalid': submitted && f1['CompanyId'].errors }">
                                        <mat-label>Company</mat-label>
                                        <mat-select placeholder="Company" required formControlName="CompanyId"
                                            [(ngModel)]="ObjLinkGenerationModel.CompanyId"
                                            (selectionChange)="GetAllAssessmentDetailsBaseOnCompanyId(ObjLinkGenerationModel.CompanyId)">
                                            <mat-option>Choose company</mat-option>
                                            <mat-option *ngFor="let Objcompany of lstCompany"
                                                [value]="Objcompany.CompanyId">
                                                {{Objcompany.CompanyName}}
                                            </mat-option>
                                        </mat-select>

                                        <mat-error
                                            *ngIf="f1['CompanyId'].errors !== null && f1['CompanyId'].errors['required']">
                                            Please select company
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <mat-form-field class="example-full-width" appearance="outline"
                                        [ngClass]="{ 'is-invalid': submitted && f1['AssessmentId'].errors }">
                                        <mat-label>Assessment</mat-label>
                                        <mat-select placeholder="Assessment" required formControlName="AssessmentId"
                                            [(ngModel)]="ObjLinkGenerationModel.AssessmentID"
                                            (selectionChange)="GetOthesMasterDetailBaseOnCompanyAndAssessmentId(ObjLinkGenerationModel.CompanyId ,ObjLinkGenerationModel.AssessmentID)">
                                            <mat-option>Choose Assessment</mat-option>
                                            <mat-option *ngFor="let ObjAssessment of lstAssessment"
                                                [value]="ObjAssessment.AssessmentId">
                                                {{ObjAssessment.AssessmentName}}
                                            </mat-option>
                                        </mat-select>

                                        <mat-error
                                            *ngIf="f1['AssessmentId'].errors !== null && f1['AssessmentId'].errors['required']">
                                            Please select assessment
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="form-group col-md-6">
                                    <mat-form-field class="example-full-width" appearance="outline"
                                        [ngClass]="{ 'is-invalid': submitted && f1['HumanResourceId'].errors }">
                                        <mat-label>Human Resource</mat-label>
                                        <mat-select placeholder="Human Resource" required
                                            formControlName="HumanResourceId" [(ngModel)]="ObjLinkGenerationModel.HrId">
                                            <mat-option>Choose Human Resource</mat-option>
                                            <mat-option *ngFor="let ObjHr of lstHrDetails" [value]="ObjHr.HrId">
                                                {{ObjHr.HrName}}
                                            </mat-option>
                                        </mat-select>

                                        <mat-error
                                            *ngIf="f1['HumanResourceId'].errors !== null && f1['HumanResourceId'].errors['required']">
                                            Please select human resource
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <mat-form-field class="example-full-width" appearance="outline"
                                        [ngClass]="{ 'is-invalid': submitted && f1['InitialMailId'].errors }">
                                        <mat-label>Initial Mail Config</mat-label>
                                        <mat-select placeholder="Initial Mail" required formControlName="InitialMailId"
                                            [(ngModel)]="ObjLinkGenerationModel.InitialMailId">
                                            <mat-option>Choose Initial Mail</mat-option>
                                            <mat-option *ngFor="let ObjIMail of lstInitialMail"
                                                [value]="ObjIMail.MailConfigId">
                                                {{ObjIMail.MailConfigName}}
                                            </mat-option>
                                        </mat-select>

                                        <mat-error
                                            *ngIf="f1['InitialMailId'].errors !== null && f1['InitialMailId'].errors['required']">
                                            Please select initial mail send
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="form-group col-md-6">
                                    <mat-form-field class="example-full-width" appearance="outline"
                                        [ngClass]="{ 'is-invalid': submitted && f1['FinalMailId'].errors }">
                                        <mat-label>Final Mail Config</mat-label>
                                        <mat-select placeholder="Final Mail" required formControlName="FinalMailId"
                                            [(ngModel)]="ObjLinkGenerationModel.FinalMailId">
                                            <mat-option>Choose Final Mail</mat-option>
                                            <mat-option *ngFor="let ObjFMail of lstFinalMail"
                                                [value]="ObjFMail.MailConfigId">
                                                {{ObjFMail.MailConfigName}}
                                            </mat-option>
                                        </mat-select>

                                        <mat-error
                                            *ngIf="f1['FinalMailId'].errors !== null && f1['FinalMailId'].errors['required']">
                                            Please select final mail send
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <section class="example-section">
                                        <mat-checkbox class="example-margin" formControlName="IsReportSendToHr"
                                            [(ngModel)]="ObjLinkGenerationModel.IsReportSendToHr">
                                            Do you want to send report to Hr ?
                                        </mat-checkbox>
                                    </section>


                                </div>
                                <div class="form-group col-md-6">

                                    <section class="example-section">
                                        <mat-checkbox class="example-margin" formControlName="IsReportSendToCandidate"
                                            [(ngModel)]="ObjLinkGenerationModel.IsReportSendToCandidate">
                                            Do you want to send report to candidate ?
                                        </mat-checkbox>
                                    </section>

                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-12">
                                    <mat-form-field [style.width.%]="100" appearance="outline"
                                        [ngClass]="{ 'is-invalid': submitted && f1['LinkCount'].errors }">
                                        <mat-label>Link Count </mat-label>
                                        <input matInput placeholder="Require link count" formControlName="LinkCount"
                                            [(ngModel)]="ObjLinkGenerationModel.LinkCount">


                                        <mat-error
                                            *ngIf="f1['LinkCount'].errors !== null && f1['LinkCount'].errors['required']">
                                            Require link count for generating link
                                        </mat-error>

                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-12">


                                    <div *ngIf="GenerationLinkForm.invalid;then FormValidation else loading_content">
                                    </div>
                                    <ng-template #FormValidation>
                                        <button type="submit" mat-raised-button color="primary"
                                                [class.spinner]="loading" [disabled]="GenerationLinkForm.invalid"
                                                (click)="Onsubmitforgeneratelink()" style="width: 100%;">Generate
                                                Link</button>
                                    </ng-template>
                                    <ng-template #loading_content>
                                        <button type="submit" mat-raised-button color="primary"
                                                [class.spinner]="loading" [disabled]="loading" style="width: 100%;"
                                                (click)="Onsubmitforgeneratelink()">Generate
                                                Link</button>
                                    </ng-template>
                                </div>
                                
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
      </div>
      <div class="col-md-1">
        <br/>
      </div>
      <div class="col-md-6">
        <div class="card">
            <div class="card-body example-container mat-elevation-z8">
                <mat-table [dataSource]="dataSource">

                    <!-- ID Column -->
                    <ng-container matColumnDef="Url">
                      <mat-header-cell *matHeaderCellDef> Url </mat-header-cell>
                      <mat-cell *matCellDef="let row"> {{row.Url}} </mat-cell>
                    </ng-container>
          
          
                    <!-- Name Column -->
                    <ng-container matColumnDef="TestId">
                      <mat-header-cell *matHeaderCellDef> TestId </mat-header-cell>
                      <mat-cell *matCellDef="let row"> {{row.TestId}} </mat-cell>
                    </ng-container>
                    
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
          
                  </mat-table>
          
                  <br />
                  <mat-paginator [pageSizeOptions]="[5, 10, 15, 20]"></mat-paginator>

                  <br/>
                  <div class="row">
                    <div class="col-md-12">
                        <button type="submit" mat-raised-button color="primary"
                        [class.spinner]="loading" 
                        (click)="OnExportToExcel()" style="width: 100%;">Export To Excel</button>
                    </div>
                  </div>
            </div>
        </div>
      </div>
    </div>
  </div>


<br/>